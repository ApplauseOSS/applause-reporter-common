!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports,require("axios"),require("validator")):"function"==typeof define&&define.amd?define(["exports","axios","validator"],i):i((t="undefined"!=typeof globalThis?globalThis:t||self)["applause-reporter-common"]={},t.axios,t.validator)}(this,(function(t,i,e){"use strict";function s(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l=s(i),n=s(e);var a;t.TestResultStatus=void 0,(a=t.TestResultStatus||(t.TestResultStatus={})).NOT_RUN="NOT_RUN",a.IN_PROGRESS="IN_PROGRESS",a.PASSED="PASSED",a.FAILED="FAILED",a.SKIPPED="SKIPPED",a.CANCELED="CANCELED",a.ERROR="ERROR";const o=t=>void 0!==t.request,r=(...t)=>{if(!Number.isInteger(t[0].productId)||t[0].productId<=0)throw new Error(`productId must be a positive integer, was: '${t[0].productId}'`);if(!o(t[0].clientConfig)){if(!n.default.isURL(t[0].clientConfig.baseUrl,{protocols:["http","https"],require_tld:!1,require_host:!0,require_protocol:!0}))throw new Error(`baseUrl is not valid HTTP/HTTPS URL, was: ${t[0].clientConfig.baseUrl}`);if(n.default.isEmpty(t[0].clientConfig.apiKey))throw new Error("apiKey is an empty string!")}};t.AutoApi=class{constructor(t){this.options=t,this.callsInFlight=0,r(t),this.client=o(t.clientConfig)?t.clientConfig:l.default.create({baseURL:t.clientConfig.baseUrl,timeout:1e4,headers:{"X-Api-Key":t.clientConfig.apiKey,"Context-Type":"application/json"},responseType:"json"})}get getCallsInFlight(){return this.callsInFlight}async startTestRun(t){this.callsInFlight+=1;try{return await this.client.post("/api/v1.0/test-run/create",{...t,sdkVersion:"js:1.0.0",productId:this.options.productId,testRailReportingEnabled:void 0!==this.options.testRailOptions,addAllTestsToPlan:this.options.testRailOptions?.addAllTestsToPlan,testRailProjectId:this.options.testRailOptions?.projectId,testRailSuiteId:this.options.testRailOptions?.suiteId,testRailPlanName:this.options.testRailOptions?.planName,testRailRunName:this.options.testRailOptions?.runName,overrideTestRailRunNameUniqueness:this.options.testRailOptions?.overrideTestRailRunUniqueness})}finally{this.callsInFlight-=1}}async endTestRun(t){this.callsInFlight+=1;try{return await this.client.delete(`/api/v3.0/driver-session/${t}?sessionStatus=COMPLETE`)}finally{this.callsInFlight-=1}}async startTestCase(t){this.callsInFlight+=1;try{return await this.client.post("/api/v1.0/test-result/create-result",t)}finally{this.callsInFlight-=1}}async submitTestResult(t){this.callsInFlight+=1;try{await this.client.post("/api/v1.0/test-result",t)}finally{this.callsInFlight-=1}}async getProviderSessionLinks(t){this.callsInFlight+=1;try{const i=t.filter((t=>t));return await this.client.post("/api/v1.0/test-result/provider-info",i)}finally{this.callsInFlight-=1}}async sendSdkHeartbeat(t){this.callsInFlight+=1;try{return await this.client.post(`/api/v2.0/sdk-heartbeat?testRunId=${t}`)}finally{this.callsInFlight-=1}}},t._validateCtorParams=r,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=index.min.js.map
